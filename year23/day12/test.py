from math import comb


def split_groups(x, arr):
    rem_tot = sum(arr) - 1
    xlen = len(x)

    if x[0] == '?':
        rem_tot += 1
    if x[-1] == '?':
        rem_tot += 1

    opts = xlen - rem_tot
    print(comb(opts, len(arr) - 1))


def single_group(x, arr):
    rem_tot = sum(arr) - 1
    xlen = len(x)

    opts = xlen - rem_tot
    print(comb(opts, len(arr)))


a = (
    ('??', (1,)),
    ('??', (1,)),
    ('?##', (3,)),
    ('???', (1,1)),

    ('???.###', (1,1,3)),
    ('??.??.?##', (1,1,3)),
    ('?#?#?#?#?#?#?#?', (1,3,1,6)),
    ('????.#.#', (4,1,1)),
    ('????.######.#####', (1,6,5)),
    ('?###????????', (3,2,1)),
    ('???.###????.###????.###????.###????.###', (1,1,3,1,1,3,1,1,3,1,1,3,1,1,3)),
    ('?###??????????###??????????###??????????###??????????###????????', (3,2,1,3,2,1,3,2,1,3,2,1,3,2,1)),
)

for i in a:
    split_groups(*i)

print('single')

single_group(*(a[0]))
single_group(*(a[1]))
single_group(*(a[2]))
single_group(*(a[3]))

# TODO divide by dots
# TODO how to divide by streams of '#'? See:
#   '?###??????????###??????????###??????????###??????????###????????', (3,2,1,3,2,1,3,2,1,3,2,1,3,2,1)